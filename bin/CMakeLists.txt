# CMake configuration file in hydra/bin folder

INCLUDE_DIRECTORIES(
    .
    ..
    ${CMAKE_CURRENT_BINARY_DIR}
    ${CMAKE_CURRENT_SOURCE_DIR}
    ${CMAKE_SOURCE_DIR}
    ${CMAKE_BINARY_DIR}
    ${CMAKE_SOURCE_DIR}/bin/
   )

# define the sources
SET(EXAMPLE_SRC h_grid_alloc_test.c)

# define executable
SET(CMAKE_REQUIRED_LIBRARIES "hydra-lib;${CMAKE_REQUIRED_LIBRARIES}")
ADD_EXECUTABLE(example-prog ${EXAMPLE_SRC})
TARGET_LINK_LIBRARIES(example-prog ${CMAKE_REQUIRED_LIBRARIES})
ADD_DEPENDENCIES(example-prog hydra-lib)

# compiler switches
SET(w_flags "-ansi -pedantic -Wall -Wshadow -Wmissing-prototypes -Wstrict-prototypes -Wpointer-arith -Wcast-qual -Wcast-align -Wwrite-strings -Wnested-externs -fshort-enums -fno-common -Dinline=")
SET(o_flags "-O1")
SET(d_flags "-ggdb")

# enable gcc specific stuff
IF (CMAKE_COMPILER_IS_GNUCC)
    SET_SOURCE_FILES_PROPERTIES(${EXAMPLE_SRC} 
      PROPERTIES
      COMPILE_FLAGS
      "${w_flags} ${o_flags} ${d_flags}")
ENDIF ()

# install binaries
INSTALL(TARGETS example-prog RUNTIME DESTINATION bin)